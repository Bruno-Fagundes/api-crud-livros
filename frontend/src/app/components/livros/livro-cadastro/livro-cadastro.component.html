<div class="form-container">
  <h2>{{ isEdicao ? "Editar" : "Cadastrar" }} Livro</h2>

  <div *ngIf="erro" class="error-message">
    {{ erro }}
  </div>

  <form [formGroup]="livroCadastro" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="titulo">Título</label>
      <input type="text" id="titulo" formControlName="titulo" />
      <div *ngIf="campoInvalido('titulo')" class="error-hint">
        Este campo é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label for="autor">Autor</label>
      <input type="text" id="autor" formControlName="autor" />
      <div *ngIf="campoInvalido('autor')" class="error-hint">
        Este campo é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label for="anoPublicacao">Ano de Publicação</label>
      <input type="number" id="anoPublicacao" formControlName="anoPublicacao" />
      <div *ngIf="campoInvalido('anoPublicacao')" class="error-hint">
        Este campo é obrigatório e deve ser um ano válido
      </div>
    </div>

    <div class="form-group">
      <label for="sinopse">Sinopse</label>
      <textarea id="sinopse" formControlName="sinopse" rows="4"></textarea>
      <div *ngIf="campoInvalido('sinopse')" class="error-hint">
        Este campo é obrigatório
      </div>
    </div>

    <div class="form-group checkbox-group" *ngIf="isEdicao">
      <label for="ativo">
        <input type="checkbox" id="ativo" formControlName="ativo" />
        Ativo
      </label>
    </div>

    <div class="form-actions">
      <a routerLink="/livros" class="btn-secondary">Cancelar</a>
      <button type="submit" class="btn-primary" [disabled]="submitting">
        {{ submitting ? "Salvando..." : isEdicao ? "Atualizar" : "Cadastrar" }}
      </button>
    </div>
  </form>
</div>
